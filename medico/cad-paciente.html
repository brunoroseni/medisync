<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastrar Paciente - MediSync</title>
    <link rel="stylesheet" href="../assets/css/main.css" />
  </head>

  <body class="main-layout">
    <!-- Header -->
    <header class="header">
      <div class="container">
        <nav class="nav">
          <div class="logo">
            <img
              src="../assets/img/logo-medisync.PNG"
              alt="MediSync Logo"
              style="height: 40px; vertical-align: middle; margin-right: 8px"
            />
            <h2
              style="
                color: var(--azul-escuro);
                display: inline-block;
                vertical-align: middle;
                margin: 0;
              "
            >
              MediSync
            </h2>
          </div>
          <div class="nav-menu" id="menu-cadastro">
            <a href="dash-medico.html" class="nav-link">Dashboard</a>
            <a href="consulta.html" class="nav-link">Consultas</a>
            <a
              href="cad-paciente.html"
              class="nav-link"
              style="background: var(--cinza-neutro)"
              >Cadastrar Paciente</a
            >
            <a href="#relatorios" class="nav-link">Relatórios</a>
            <button onclick="logout()" class="btn btn-danger">Sair</button>
          </div>
          <button
            class="mobile-menu-toggle"
            type="button"
            aria-expanded="false"
            aria-controls="menu-cadastro"
          >
            <span class="sr-only">Alternar menu</span>
            <span class="mobile-menu-toggle__icon" aria-hidden="true"></span>
          </button>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Header -->
        <div class="dashboard-header">
          <div>
            <h1>Cadastrar Novo Paciente</h1>
            <p>
              Registre um novo paciente no sistema e envie credenciais de acesso
            </p>
          </div>
        </div>

        <form id="cadastroPacienteForm">
          <div class="grid grid-2">
            <!-- Dados Pessoais -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Dados Pessoais</h3>
              </div>

              <div class="form-group">
                <label class="form-label">Nome Completo *</label>
                <input
                  type="text"
                  class="form-input"
                  required
                  placeholder="Nome completo do paciente"
                />
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">CPF *</label>
                  <input
                    type="text"
                    class="form-input"
                    required
                    placeholder="000.000.000-00"
                    maxlength="14"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">RG</label>
                  <input
                    type="text"
                    class="form-input"
                    placeholder="00.000.000-0"
                  />
                </div>
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Data de Nascimento *</label>
                  <input type="date" class="form-input" required />
                </div>
                <div class="form-group">
                  <label class="form-label">Sexo *</label>
                  <select class="form-select" required>
                    <option value="">Selecione</option>
                    <option value="M">Masculino</option>
                    <option value="F">Feminino</option>
                    <option value="O">Outro</option>
                  </select>
                </div>
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Estado Civil</label>
                  <select class="form-select">
                    <option value="">Selecione</option>
                    <option value="solteiro">Solteiro(a)</option>
                    <option value="casado">Casado(a)</option>
                    <option value="divorciado">Divorciado(a)</option>
                    <option value="viuvo">Viúvo(a)</option>
                    <option value="uniao">União Estável</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Profissão</label>
                  <input
                    type="text"
                    class="form-input"
                    placeholder="Profissão do paciente"
                  />
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Nome da Mãe</label>
                <input
                  type="text"
                  class="form-input"
                  placeholder="Nome completo da mãe"
                />
              </div>
            </div>

            <!-- Contato -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Informações de Contato</h3>
              </div>

              <div class="form-group">
                <label class="form-label">Email *</label>
                <input
                  type="email"
                  class="form-input"
                  required
                  placeholder="email@exemplo.com"
                />
                <small class="text-muted"
                  >As credenciais de acesso serão enviadas para este
                  email</small
                >
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Telefone Principal *</label>
                  <input
                    type="tel"
                    class="form-input"
                    required
                    placeholder="(11) 99999-9999"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Telefone Alternativo</label>
                  <input
                    type="tel"
                    class="form-input"
                    placeholder="(11) 3333-3333"
                  />
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">CEP *</label>
                <input
                  type="text"
                  class="form-input"
                  required
                  placeholder="00000-000"
                  maxlength="9"
                  onblur="buscarCEP(this.value)"
                />
              </div>

              <div class="form-group">
                <label class="form-label">Endereço *</label>
                <input
                  type="text"
                  class="form-input"
                  required
                  placeholder="Rua, avenida, etc."
                  id="endereco"
                />
              </div>

              <div class="grid grid-3" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Número</label>
                  <input type="text" class="form-input" placeholder="123" />
                </div>
                <div class="form-group">
                  <label class="form-label">Complemento</label>
                  <input
                    type="text"
                    class="form-input"
                    placeholder="Apto, sala..."
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Bairro *</label>
                  <input type="text" class="form-input" required id="bairro" />
                </div>
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Cidade *</label>
                  <input type="text" class="form-input" required id="cidade" />
                </div>
                <div class="form-group">
                  <label class="form-label">Estado *</label>
                  <select class="form-select" required id="estado">
                    <option value="">UF</option>
                    <option value="SP">SP</option>
                    <option value="RJ">RJ</option>
                    <option value="MG">MG</option>
                    <option value="RS">RS</option>
                    <option value="PR">PR</option>
                    <option value="SC">SC</option>
                    <!-- Mais estados... -->
                  </select>
                </div>
              </div>
            </div>

            <!-- Informações Médicas -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Informações Médicas</h3>
              </div>

              <div class="grid grid-3" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Tipo Sanguíneo</label>
                  <select class="form-select">
                    <option value="">Selecione</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Peso (kg)</label>
                  <input
                    type="number"
                    step="0.1"
                    class="form-input"
                    placeholder="70.5"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Altura (cm)</label>
                  <input type="number" class="form-input" placeholder="175" />
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Alergias Conhecidas</label>
                <textarea
                  class="form-input"
                  rows="2"
                  placeholder="Liste as alergias conhecidas do paciente..."
                ></textarea>
              </div>

              <div class="form-group">
                <label class="form-label">Medicamentos em Uso</label>
                <textarea
                  class="form-input"
                  rows="2"
                  placeholder="Medicamentos que o paciente já utiliza..."
                ></textarea>
              </div>

              <div class="form-group">
                <label class="form-label">Histórico Médico Relevante</label>
                <textarea
                  class="form-input"
                  rows="3"
                  placeholder="Cirurgias, doenças crônicas, internações anteriores..."
                ></textarea>
              </div>
            </div>

            <!-- Contato de Emergência -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Contato de Emergência</h3>
              </div>

              <div class="form-group">
                <label class="form-label">Nome Completo *</label>
                <input
                  type="text"
                  class="form-input"
                  required
                  placeholder="Nome do contato de emergência"
                />
              </div>

              <div class="grid grid-2" style="gap: var(--spacing-sm)">
                <div class="form-group">
                  <label class="form-label">Parentesco *</label>
                  <input
                    type="text"
                    class="form-input"
                    required
                    placeholder="Mãe, pai, cônjuge..."
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Telefone *</label>
                  <input
                    type="tel"
                    class="form-input"
                    required
                    placeholder="(11) 99999-9999"
                  />
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Telefone Alternativo</label>
                <input
                  type="tel"
                  class="form-input"
                  placeholder="(11) 3333-3333"
                />
              </div>
            </div>
          </div>

          <!-- Informações do Sistema -->
          <div class="card mt-4">
            <div class="card-header">
              <h3 class="card-title">Configurações de Acesso</h3>
            </div>

            <div
              class="alert"
              style="
                background: rgba(46, 155, 215, 0.1);
                border-left: 4px solid var(--azul-medio);
              "
            >
              <strong class="icon-inline"
                ><span class="material-symbols-rounded" aria-hidden="true"
                  >info</span
                >
                Informação:</strong
              >
              Uma senha temporária será gerada automaticamente e enviada por
              email para o paciente. O paciente deverá alterar a senha no
              primeiro acesso.
            </div>

            <div class="form-group">
              <label
                style="
                  display: flex;
                  align-items: center;
                  gap: var(--spacing-sm);
                "
              >
                <input type="checkbox" checked />
                <span
                  >Enviar email de boas-vindas com instruções de acesso</span
                >
              </label>
            </div>

            <div class="form-group">
              <label
                style="
                  display: flex;
                  align-items: center;
                  gap: var(--spacing-sm);
                "
              >
                <input type="checkbox" />
                <span>Agendar primeira consulta automaticamente</span>
              </label>
            </div>
          </div>

          <!-- Botões de Ação -->
          <div class="card mt-4">
            <div class="d-flex justify-end" style="gap: var(--spacing-sm)">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="window.location.href='dash-medico.html'"
              >
                Cancelar
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="saveAsDraft()"
              >
                Salvar Rascunho
              </button>
              <button type="submit" class="btn btn-primary">
                Cadastrar Paciente
              </button>
            </div>
          </div>
        </form>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2024 MediSync. Sistema médico profissional.</p>
      </div>
    </footer>

    <script src="../assets/js/main.js"></script>
    <script>
      function logout() {
        localStorage.clear();
        window.location.href = "../index.html";
      }

      function buscarCEP(cep) {
        // Simular busca de CEP
        if (cep.length === 9) {
          setTimeout(() => {
            document.getElementById("endereco").value = "Rua das Flores";
            document.getElementById("bairro").value = "Centro";
            document.getElementById("cidade").value = "São Paulo";
            document.getElementById("estado").value = "SP";
          }, 500);
        }
      }

      function saveAsDraft() {
        alert("Rascunho salvo! Você pode continuar o cadastro mais tarde.");
      }

      document
        .getElementById("cadastroPacienteForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // Simular processo de cadastro
          const loadingAlert = document.createElement("div");
          loadingAlert.className = "alert alert-success";
          loadingAlert.innerHTML = `
        <strong class="icon-inline"><span class="material-symbols-rounded" aria-hidden="true">check_circle</span> Paciente cadastrado com sucesso!</strong><br>
        • Email de boas-vindas enviado<br>
        • Senha temporária: temp123456<br>
        • O paciente deve alterar a senha no primeiro acesso
      `;

          this.insertBefore(loadingAlert, this.firstChild);
          loadingAlert.scrollIntoView({ behavior: "smooth" });

          setTimeout(() => {
            if (confirm("Deseja cadastrar outro paciente?")) {
              this.reset();
              loadingAlert.remove();
            } else {
              window.location.href = "dash-medico.html";
            }
          }, 3000);
        });

      // Máscara para CPF
      document
        .querySelector('input[placeholder="000.000.000-00"]')
        .addEventListener("input", function (e) {
          let value = e.target.value.replace(/\D/g, "");
          value = value.replace(/(\d{3})(\d)/, "$1.$2");
          value = value.replace(/(\d{3})(\d)/, "$1.$2");
          value = value.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
          e.target.value = value;
        });

      // Máscara para CEP
      document
        .querySelector('input[placeholder="00000-000"]')
        .addEventListener("input", function (e) {
          let value = e.target.value.replace(/\D/g, "");
          value = value.replace(/(\d{5})(\d)/, "$1-$2");
          e.target.value = value;
        });
    </script>
  </body>
</html>
